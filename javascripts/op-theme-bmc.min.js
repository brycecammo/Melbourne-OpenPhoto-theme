(function(e){e.anythingSlider=function(f,b){var a=this,d;a.el=f;a.$el=e(f).addClass("anythingBase").wrap('<div class="anythingSlider"><div class="anythingWindow" /></div>');a.$el.data("AnythingSlider",a);a.init=function(){a.options=d=e.extend({},e.anythingSlider.defaults,b);a.initialized=!1;e.isFunction(d.onBeforeInitialize)&&a.$el.bind("before_initialize",d.onBeforeInitialize);a.$el.trigger("before_initialize",a);a.$wrapper=a.$el.parent().closest("div.anythingSlider").addClass("anythingSlider-"+
d.theme);a.$window=a.$el.closest("div.anythingWindow");a.win=window;a.$win=e(a.win);a.$controls=e('<div class="anythingControls"></div>').appendTo(null!==d.appendControlsTo&&e(d.appendControlsTo).length?e(d.appendControlsTo):a.$wrapper);a.$startStop=e('<a href="#" class="start-stop"></a>');d.buildStartStop&&a.$startStop.appendTo(null!==d.appendStartStopTo&&e(d.appendStartStopTo).length?e(d.appendStartStopTo):a.$controls);a.$nav=e('<ul class="thumbNav" />').appendTo(null!==d.appendNavigationTo&&e(d.appendNavigationTo).length?
e(d.appendNavigationTo):a.$controls);a.flag=!1;a.playing=d.autoPlay;a.slideshow=!1;a.hovered=!1;a.panelSize=[];a.currentPage=d.startPanel=parseInt(d.startPanel,10)||1;d.changeBy=parseInt(d.changeBy,10)||1;a.adj=d.infiniteSlides?0:1;a.width=a.$el.width();a.height=a.$el.height();a.outerPad=[a.$wrapper.innerWidth()-a.$wrapper.width(),a.$wrapper.innerHeight()-a.$wrapper.height()];d.playRtl&&a.$wrapper.addClass("rtl");if(d.expand)a.$outer=a.$wrapper.parent(),a.$window.css({width:"100%",height:"100%"}),
a.checkResize();d.buildStartStop&&a.buildAutoPlay();d.buildArrows&&a.buildNextBackButtons();if(!d.autoPlay)d.autoPlayLocked=!1;a.updateSlider();a.$lastPage=a.$currentPage;a.runTimes=e("div.anythingSlider").index(a.$wrapper)+1;a.regex=RegExp("panel"+a.runTimes+"-(\\d+)","i");1===a.runTimes&&a.makeActive();if(!e.isFunction(e.easing[d.easing]))d.easing="swing";d.pauseOnHover&&a.$wrapper.hover(function(){a.playing&&(a.$el.trigger("slideshow_paused",a),a.clearTimer(!0))},function(){a.playing&&(a.$el.trigger("slideshow_unpaused",
a),a.startStop(a.playing,!0))});a.setCurrentPage(a.gotoHash()||d.startPage,!1);a.slideControls(!1);a.$wrapper.bind("mouseenter mouseleave",function(c){a.hovered="mouseenter"===c.type?!0:!1;a.slideControls(a.hovered,!1)});e(document).keyup(function(c){if(d.enableKeyboard&&a.$wrapper.is(".activeSlider")&&!c.target.tagName.match("TEXTAREA|INPUT|SELECT")&&(d.vertical||!(38===c.which||40===c.which)))switch(c.which){case 39:case 40:a.goForward();break;case 37:case 38:a.goBack()}});a.$items.delegate("a",
"focus.AnythingSlider",function(c){var b=e(this).closest(".panel"),b=a.$items.index(b)+a.adj;a.$items.find(".focusedLink").removeClass("focusedLink");e(this).addClass("focusedLink");a.$window.scrollLeft(0);if(-1!==b&&(b>=a.currentPage+d.showMultiple||b<a.currentPage))a.gotoPage(b),c.preventDefault()});var c="slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed".split(" ");e.each("onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete".split(" "),
function(b,h){e.isFunction(d[h])&&a.$el.bind(c[b],d[h])});e.isFunction(d.onSlideComplete)&&a.$el.bind("slide_complete",function(){setTimeout(function(){d.onSlideComplete(a)},0)});a.initialized=!0;a.$el.trigger("initialized",a);a.startStop(a.playing)};a.updateSlider=function(){a.$el.children(".cloned").remove();a.$nav.empty();a.currentPage=a.currentPage||1;a.$items=a.$el.children();a.pages=a.$items.length;a.dir=d.vertical?"top":"left";d.showMultiple=d.vertical?1:parseInt(d.showMultiple,10)||1;d.navigationSize=
!1===d.navigationSize?0:parseInt(d.navigationSize,10)||0;if(1<d.showMultiple){if(d.showMultiple>a.pages)d.showMultiple=a.pages;a.adjustMultiple=d.infiniteSlides&&1<a.pages?0:d.showMultiple-1;a.pages=a.$items.length-a.adjustMultiple}a.$controls.add(a.$nav).add(a.$startStop).add(a.$forward).add(a.$back)[1>=a.pages?"hide":"show"]();1<a.pages&&a.buildNavigation();d.infiniteSlides&&1<a.pages&&(a.$el.prepend(a.$items.filter(":last").clone().removeAttr("id").addClass("cloned")),1<d.showMultiple?a.$el.append(a.$items.filter(":lt("+
d.showMultiple+")").clone().removeAttr("id").addClass("cloned").addClass("multiple")):a.$el.append(a.$items.filter(":first").clone().removeAttr("id").addClass("cloned")),a.$el.find(".cloned").each(function(){e(this).find("a,input,textarea,select,button,area").attr("disabled","disabled");e(this).find("[id]").removeAttr("id")}));a.$items=a.$el.children().addClass("panel"+(d.vertical?" vertical":""));a.setDimensions();d.resizeContents?(a.$items.css("width",a.width),a.$wrapper.css("width",a.getDim(a.currentPage)[0]),
a.$wrapper.add(a.$items).css("height",a.height)):a.$win.load(function(){a.setDimensions()});if(a.currentPage>a.pages)a.currentPage=a.pages;a.setCurrentPage(a.currentPage,!1);a.$nav.find("a").eq(a.currentPage-1).addClass("cur")};a.buildNavigation=function(){if(d.buildNavigation&&1<a.pages){var c,b;a.$items.filter(":not(.cloned)").each(function(h){var g=h+1;c=(1===g?"first":"")+(g===a.pages?"last":"");b=e('<a href="#"></a>').addClass("panel"+g).wrap('<li class="'+c+'" />');a.$nav.append(b.parent());
e.isFunction(d.navigationFormatter)?(c=d.navigationFormatter(g,e(this)),b.html("<span>"+c+"</span>"),0>parseInt(b.find("span").css("text-indent"),10)&&b.addClass(d.tooltipClass).attr("title",c)):b.html("<span>"+g+"</span>");b.bind(d.clickControls,function(c){if(!a.flag&&d.enableNavigation)a.flag=!0,setTimeout(function(){a.flag=!1},100),a.gotoPage(g),d.hashTags&&a.setHash(g);c.preventDefault()})});if(d.navigationSize&&d.navigationSize<a.pages)a.$controls.find(".anythingNavWindow").length||a.$nav.before('<ul><li class="prev"><a href="#"><span>'+
d.backText+"</span></a></li></ul>").after('<ul><li class="next"><a href="#"><span>'+d.forwardText+"</span></a></li></ul>").wrap('<div class="anythingNavWindow"></div>'),a.navWidths=a.$nav.find("li").map(function(){return e(this).innerWidth()+Math.ceil(parseInt(e(this).find("span").css("left"),10)/2||0)}).get(),a.navLeft=1,a.$nav.width(a.navWidth(1,a.pages+1)+5),a.$controls.find(".anythingNavWindow").width(a.navWidth(1,d.navigationSize+1)).end().find(".prev,.next").bind(d.clickControls,function(c){if(!a.flag)a.flag=
!0,setTimeout(function(){a.flag=!1},200),a.navWindow(a.navLeft+d.navigationSize*(e(this).is(".prev")?-1:1));c.preventDefault()})}};a.navWidth=function(c,d){var b;b=Math.min(c,d);for(var e=Math.max(c,d),f=0;b<e;b++)f+=a.navWidths[b-1]||0;return f};a.navWindow=function(c){if(d.navigationSize&&d.navigationSize<a.pages&&a.navWidths){var b=a.pages-d.navigationSize+1,c=1>=c?1:1<c&&c<b?c:b;if(c!==a.navLeft)a.$controls.find(".anythingNavWindow").animate({scrollLeft:a.navWidth(1,c),width:a.navWidth(c,c+d.navigationSize)},
{queue:!1,duration:d.animationTime}),a.navLeft=c}};a.buildNextBackButtons=function(){a.$forward=e('<span class="arrow forward"><a href="#"><span>'+d.forwardText+"</span></a></span>");a.$back=e('<span class="arrow back"><a href="#"><span>'+d.backText+"</span></a></span>");a.$back.bind(d.clickBackArrow,function(c){if(d.enableArrows&&!a.flag)a.flag=!0,setTimeout(function(){a.flag=!1},100),a.goBack();c.preventDefault()});a.$forward.bind(d.clickForwardArrow,function(c){if(d.enableArrows&&!a.flag)a.flag=
!0,setTimeout(function(){a.flag=!1},100),a.goForward();c.preventDefault()});a.$back.add(a.$forward).find("a").bind("focusin focusout",function(){e(this).toggleClass("hover")});a.$back.appendTo(null!==d.appendBackTo&&e(d.appendBackTo).length?e(d.appendBackTo):a.$wrapper);a.$forward.appendTo(null!==d.appendForwardTo&&e(d.appendForwardTo).length?e(d.appendForwardTo):a.$wrapper);a.$arrowWidth=a.$forward.width()};a.buildAutoPlay=function(){a.$startStop.html("<span>"+(a.playing?d.stopText:d.startText)+
"</span>").bind(d.clickSlideshow,function(c){d.enableStartStop&&(a.startStop(!a.playing),a.makeActive(),a.playing&&!d.autoPlayDelayed&&a.goForward(!0));c.preventDefault()}).bind("focusin focusout",function(){e(this).toggleClass("hover")})};a.checkResize=function(c){clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){var b=a.$outer.width()-a.outerPad[0],e=("BODY"===a.$outer[0].tagName?a.$win.height():a.$outer.height())-a.outerPad[1];if(a.width*d.showMultiple!==b||a.height!==e)a.setDimensions(),
a.gotoPage(a.currentPage,a.playing,null,-1);"undefined"===typeof c&&a.checkResize()},500)};a.setDimensions=function(){var c,b,h,g=0,f={width:"100%",height:"100%"},l=1<d.showMultiple?a.width||a.$window.width()/d.showMultiple:a.$window.width(),i=a.$win.width();if(d.expand)c=a.$outer.width()-a.outerPad[0],a.height=b=a.$outer.height()-a.outerPad[1],a.$wrapper.add(a.$window).add(a.$items).css({width:c,height:b}),a.width=l=1<d.showMultiple?c/d.showMultiple:c;a.$items.each(function(m){h=e(this).children();
if(d.resizeContents)c=a.width,b=a.height,e(this).css({width:c,height:b}),h.length&&("EMBED"===h[0].tagName&&h.attr(f),"OBJECT"===h[0].tagName&&h.find("embed").attr(f),1===h.length&&h.css(f));else{c=e(this).width()||a.width;1===h.length&&c>=i&&(c=h.width()>=i?l:h.width(),h.css("max-width",c));e(this).css("width",c);b=1===h.length?h.outerHeight(!0):e(this).height();if(b<=a.outerPad[1])b=a.height;e(this).css("height",b)}a.panelSize[m]=[c,b,g];g+=d.vertical?b:c});a.$el.css(d.vertical?"height":"width",
g)};a.getDim=function(c){if(1>a.pages||isNaN(c))return[a.width,a.height];var c=d.infiniteSlides&&1<a.pages?c:c-1,b,e=a.panelSize[c][0],g=a.panelSize[c][1];if(1<d.showMultiple)for(b=1;b<d.showMultiple;b++)e+=a.panelSize[(c+b)%d.showMultiple][0],g=Math.max(g,a.panelSize[c+b][1]);return[e,g]};a.goForward=function(c){a.gotoPage(a.currentPage+d.changeBy*(d.playRtl?-1:1),c)};a.goBack=function(c){a.gotoPage(a.currentPage+d.changeBy*(d.playRtl?1:-1),c)};a.gotoPage=function(c,b,h,g){!0!==b&&(b=!1,a.startStop(!1),
a.makeActive());/^[#|.]/.test(c)&&e(c).length&&(c=e(c).closest(".panel").index()+a.adj);1!==d.changeBy&&(0>c&&(c+=a.pages),c>a.pages&&(c-=a.pages));if(!(1>=a.pages)){a.$lastPage=a.$currentPage;if("number"!==typeof c)c=d.startPanel,a.setCurrentPage(c);if(!b||!d.isVideoPlaying(a))c>a.pages+1-a.adj&&(c=!d.infiniteSlides&&!d.stopAtEnd?1:a.pages),c<a.adj&&(c=!d.infiniteSlides&&!d.stopAtEnd?a.pages:1),a.currentPage=c>a.pages?a.pages:1>c?1:a.currentPage,a.$currentPage=a.$items.eq(a.currentPage-a.adj),a.exactPage=
c,a.targetPage=0===c?a.pages-a.adj:c>a.pages?1-a.adj:c-a.adj,a.$targetPage=a.$items.eq(a.targetPage),g=g||d.animationTime,0<=g&&a.$el.trigger("slide_init",a),a.slideControls(!0,!1),!0!==b&&(b=!1),(!b||d.stopAtEnd&&c===a.pages)&&a.startStop(!1),0<=g&&a.$el.trigger("slide_begin",a),setTimeout(function(b){d.resizeContents||(b=a.getDim(c),a.$wrapper.filter(":not(:animated)").animate({width:b[0]||a.width,height:b[1]||a.height},{queue:!1,duration:0>g?0:g,easing:d.easing}));b={};b[a.dir]=-a.panelSize[d.infiniteSlides&&
1<a.pages?c:c-1][2];a.$el.filter(":not(:animated)").animate(b,{queue:!1,duration:g,easing:d.easing,complete:function(){a.endAnimation(c,h,g)}})},parseInt(d.delayBeforeAnimate,10)||0)}};a.endAnimation=function(c,b,e){0===c?(a.$el.css(a.dir,-a.panelSize[a.pages][2]),c=a.pages):c>a.pages&&(a.$el.css(a.dir,-a.panelSize[1][2]),c=1);a.exactPage=c;a.setCurrentPage(c,!1);a.$items.removeClass("activePage").eq(c-a.adj).addClass("activePage");a.hovered||a.slideControls(!1);0<=e&&a.$el.trigger("slide_complete",
a);"function"===typeof b&&b(a);d.autoPlayLocked&&!a.playing&&setTimeout(function(){a.startStop(!0)},d.resumeDelay-(d.autoPlayDelayed?d.delay:0))};a.setCurrentPage=function(c,b){c=parseInt(c,10);if(!(1>a.pages||0===c||isNaN(c))){c>a.pages+1-a.adj&&(c=a.pages-a.adj);c<a.adj&&(c=1);d.buildNavigation&&a.$nav.find(".cur").removeClass("cur").end().find("a").eq(c-1).addClass("cur");!d.infiniteSlides&&d.stopAtEnd&&(a.$wrapper.find("span.forward")[c===a.pages?"addClass":"removeClass"]("disabled").end().find("span.back")[1===
c?"addClass":"removeClass"]("disabled"),c===a.pages&&a.playing&&a.startStop());if(!b){var e=a.getDim(c);a.$wrapper.css({width:e[0],height:e[1]}).add(a.$window).scrollLeft(0);a.$el.css(a.dir,-a.panelSize[d.infiniteSlides&&1<a.pages?c:c-1][2])}a.currentPage=c;a.$currentPage=a.$items.removeClass("activePage").eq(c-a.adj).addClass("activePage")}};a.makeActive=function(){a.$wrapper.is(".activeSlider")||(e(".activeSlider").removeClass("activeSlider"),a.$wrapper.addClass("activeSlider"))};a.gotoHash=function(){var c=
a.win.location.hash,b=c.indexOf("&"),h=c.match(a.regex);null===h&&!/^#&/.test(c)&&!/#!?\//.test(c)?(c=c.substring(0,0<=b?b:c.length),h=e(c).length&&e(c).closest(".anythingBase")[0]===a.el?e(c).closest(".panel").index():null):null!==h&&(h=d.hashTags?parseInt(h[1],10):null);return h};a.setHash=function(c){var b="panel"+a.runTimes+"-",d=a.win.location.hash;if("undefined"!==typeof d)a.win.location.hash=0<d.indexOf(b)?d.replace(a.regex,b+c):d+"&"+b+c};a.slideControls=function(c){var b=c?0:d.animationTime,
e=c?d.animationTime:0,g=c?1:0,f=c?0:1;d.toggleControls&&a.$controls.stop(!0,!0).delay(b)[c?"slideDown":"slideUp"](d.animationTime/2).delay(e);d.buildArrows&&d.toggleArrows&&(!a.hovered&&a.playing&&(f=1,g=0),a.$forward.stop(!0,!0).delay(b).animate({right:f*a.$arrowWidth,opacity:g},d.animationTime/2),a.$back.stop(!0,!0).delay(b).animate({left:f*a.$arrowWidth,opacity:g},d.animationTime/2))};a.clearTimer=function(b){if(a.timer&&(a.win.clearInterval(a.timer),!b&&a.slideshow))a.$el.trigger("slideshow_stop",
a),a.slideshow=!1};a.startStop=function(b,e){!0!==b&&(b=!1);if((a.playing=b)&&!e)a.$el.trigger("slideshow_start",a),a.slideshow=!0;d.buildStartStop&&(a.$startStop.toggleClass("playing",b).find("span").html(b?d.stopText:d.startText),0>parseInt(a.$startStop.find("span").css("text-indent"),10)&&a.$startStop.addClass(d.tooltipClass).attr("title",b?d.stopText:d.startText));b?(a.clearTimer(!0),a.timer=a.win.setInterval(function(){d.isVideoPlaying(a)?d.resumeOnVideoEnd||a.startStop():a.goForward(!0)},d.delay)):
a.clearTimer()};a.init()};e.anythingSlider.defaults={theme:"default",expand:!1,resizeContents:!0,vertical:!1,showMultiple:!1,easing:"swing",buildArrows:!0,buildNavigation:!0,buildStartStop:!0,appendForwardTo:null,appendBackTo:null,appendControlsTo:null,appendNavigationTo:null,appendStartStopTo:null,toggleArrows:!1,toggleControls:!1,startText:"Start",stopText:"Stop",forwardText:"&raquo;",backText:"&laquo;",tooltipClass:"tooltip",enableArrows:!0,enableNavigation:!0,enableStartStop:!0,enableKeyboard:!0,
startPanel:1,changeBy:1,hashTags:!0,infiniteSlides:!0,navigationFormatter:null,navigationSize:!1,autoPlay:!1,autoPlayLocked:!1,autoPlayDelayed:!1,pauseOnHover:!0,stopAtEnd:!1,playRtl:!1,delay:3E3,resumeDelay:15E3,animationTime:600,delayBeforeAnimate:0,clickForwardArrow:"click",clickBackArrow:"click",clickControls:"click focusin",clickSlideshow:"click",resumeOnVideoEnd:!0,resumeOnVisible:!0,addWmodeToObject:"opaque",isVideoPlaying:function(){return!1}};e.fn.anythingSlider=function(f,b){return this.each(function(){var a,
d=e(this).data("AnythingSlider");(typeof f).match("object|undefined")?d?d.updateSlider():new e.anythingSlider(this,f):/\d/.test(f)&&!isNaN(f)&&d?(a="number"===typeof f?f:parseInt(e.trim(f),10),1<=a&&a<=d.pages&&d.gotoPage(a,!1,b)):/^[#|.]/.test(f)&&e(f).length&&d.gotoPage(f,!1,b)})}})(jQuery);
(function(e){function f(a){return"object"==typeof a?a:{top:a,left:a}}var b=e.scrollTo=function(a,b,c){e(window).scrollTo(a,b,c)};b.defaults={axis:"xy",duration:1.3<=parseFloat(e.fn.jquery)?0:1};b.window=function(){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==e.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return e.browser.safari||
"BackCompat"==a.compatMode?a.body:a.documentElement})};e.fn.scrollTo=function(a,d,c){"object"==typeof d&&(c=d,d=0);"function"==typeof c&&(c={onAfter:c});"max"==a&&(a=9E9);c=e.extend({},b.defaults,c);d=d||c.speed||c.duration;c.queue=c.queue&&1<c.axis.length;c.queue&&(d/=2);c.offset=f(c.offset);c.over=f(c.over);return this._scrollable().each(function(){function n(b){g.animate(i,d,c.easing,b&&function(){b.call(this,a,c)})}var h=this,g=e(h),k=a,l,i={},m=g.is("html,body");switch(typeof k){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=
f(k);break}k=e(k,this);case "object":if(k.is||k.style)l=(k=e(k)).offset()}e.each(c.axis.split(""),function(a,d){var e="x"==d?"Left":"Top",f=e.toLowerCase(),j="scroll"+e,o=h[j],p=b.max(h,d);l?(i[j]=l[f]+(m?0:o-g.offset()[f]),c.margin&&(i[j]-=parseInt(k.css("margin"+e))||0,i[j]-=parseInt(k.css("border"+e+"Width"))||0),i[j]+=c.offset[f]||0,c.over[f]&&(i[j]+=k["x"==d?"width":"height"]()*c.over[f])):(e=k[f],i[j]=e.slice&&"%"==e.slice(-1)?parseFloat(e)/100*p:e);/^\d+$/.test(i[j])&&(i[j]=0>=i[j]?0:Math.min(i[j],
p));!a&&c.queue&&(o!=i[j]&&n(c.onAfterFirst),delete i[j])});n(c.onAfter)}).end()};b.max=function(a,b){var c="x"==b?"Width":"Height",f="scroll"+c;if(!e(a).is("html,body"))return a[f]-e(a)[c.toLowerCase()]();var c="client"+c,h=a.ownerDocument.documentElement,g=a.ownerDocument.body;return Math.max(h[f],g[f])-Math.min(h[c],g[c])}})(jQuery);
window.Swipe=function(e,f){if(!e)return null;this.options=f||{};this.index=this.options.startSlide||0;this.speed=this.options.speed||300;this.callback=this.options.callback||function(){};this.delay=this.options.auto||0;this.container=e;this.element=this.container.children[0];this.container.style.overflow="hidden";this.element.style.listStyle="none";this.setup();this.begin();this.element.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",
this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1))};
Swipe.prototype={setup:function(){this.slides=this.element.children;this.length=this.slides.length;if(2>this.length)return null;this.width=this.container.getBoundingClientRect().width;if(!this.width)return null;this.container.style.visibility="hidden";this.element.style.width=this.slides.length*this.width+"px";for(var e=this.slides.length;e--;){var f=this.slides[e];f.style.width=this.width+"px";f.style.display="table-cell";f.style.verticalAlign="top"}this.slide(this.index,0);this.container.style.visibility=
"visible"},slide:function(e,f){var b=this.element.style;b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=f+"ms";b.webkitTransform="translate3d("+-(e*this.width)+"px,0,0)";b.msTransform=b.MozTransform=b.OTransform="translateX("+-(e*this.width)+"px)";this.index=e},getPos:function(){return this.index},prev:function(e){this.delay=e||0;clearTimeout(this.interval);this.index&&this.slide(this.index-1,this.speed)},next:function(e){this.delay=
e||0;clearTimeout(this.interval);this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},begin:function(){var e=this;this.interval=this.delay?setTimeout(function(){e.next(e.delay)},this.delay):0},handleEvent:function(e){switch(e.type){case "touchstart":this.onTouchStart(e);break;case "touchmove":this.onTouchMove(e);break;case "touchend":this.onTouchEnd(e);break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "transitionend":this.transitionEnd(e);
break;case "resize":this.setup()}},transitionEnd:function(e){this.delay&&this.begin();this.callback(e,this.index,this.slides[this.index])},onTouchStart:function(e){this.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)};this.isScrolling=void 0;this.deltaX=0;this.element.style.webkitTransitionDuration=0},onTouchMove:function(e){if(!(1<e.touches.length||e.scale&&1!==e.scale))this.deltaX=e.touches[0].pageX-this.start.pageX,"undefined"==typeof this.isScrolling&&(this.isScrolling=
!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(e.touches[0].pageY-this.start.pageY))),this.isScrolling||(e.preventDefault(),clearTimeout(this.interval),this.deltaX/=!this.index&&0<this.deltaX||this.index==this.length-1&&0>this.deltaX?Math.abs(this.deltaX)/this.width+1:1,this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)")},onTouchEnd:function(){var e=250>Number(new Date)-this.start.time&&20<Math.abs(this.deltaX)||Math.abs(this.deltaX)>this.width/2,
f=!this.index&&0<this.deltaX||this.index==this.length-1&&0>this.deltaX;this.isScrolling||this.slide(this.index+(e&&!f?0>this.deltaX?1:-1:0),this.speed)}};
var opTheme=function(){var e=function(b){void 0!==console&&void 0!==console.log&&console.log(b)},f=void 0;return{callback:{keyboard:function(){e("keyboard!!!!")},actionDelete:function(b){b.preventDefault();var b=$(b.target),a=b.attr("href")+".json",d=b.attr("data-id");OP.Util.makeRequest(a,b.parent().serializeArray(),function(a){200===a.code?$(".action-container-"+d).hide("medium",function(){$(this).remove()}):opTheme.message.error("Could not delete the photo.")});return!1},commentJump:function(b){b.preventDefault();
$.scrollTo($("div.comment-form"),200);return!1},credentailDelete:function(b){b.preventDefault();var a=$(b.target),b=a.attr("href")+".json";OP.Util.makeRequest(b,{},function(b){200===b.code?(a.parent().remove(),opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});return!1},groupCheckbox:function(b){b=$(b.target);b.hasClass("none")&&b.is(":checked")?$("input.group-checkbox:not(.none)").removeAttr("checked"):b.is(":checked")&&$("input.group-checkbox.none").removeAttr("checked")},
groupPost:function(b){b.preventDefault();var b=$(b.target).parent(),a=b.attr("action")+".json",d=-1<a.search("create");OP.Util.makeRequest(a,b.serializeArray(),function(a){200===a.code?d?location.href=location.href:opTheme.message.confirm("Group updated successfully."):opTheme.message.error("Could not update group.")});return!1},login:function(b){b=$(b.target);b.hasClass("browserid")?navigator.id.getVerifiedEmail(function(a){a?opTheme.user.browserid.loginSuccess(a):opTheme.user.browserid.loginFailure(a)}):
b.hasClass("facebook")&&FB.login(function(a){a.authResponse?(console.log("User logged in, posting to openphoto host."),OP.Util.makeRequest("/user/facebook/login.json",opTheme.user.base.loginProcessed)):console.log("User cancelled login or did not fully authorize.")},{scope:"email"})},photoDelete:function(b){b.preventDefault();var a=$(b.target),b=a.parent().attr("action")+".json";OP.Util.makeRequest(b,a.parent().serializeArray(),function(b){200===b.code?(a.html("This photo has been deleted"),opTheme.message.confirm("This photo has been deleted.")):
opTheme.message.error("Could not delete the photo.")});return!1},photoEdit:function(b){b.preventDefault();b=$(b.target).attr("href")+".json";1==$("div.owner-edit").length?$.scrollTo($("div.owner-edit"),200):OP.Util.makeRequest(b,{},function(a){200===a.code?($("#content").append(a.result.markup),$.scrollTo($("div.owner-edit"),200)):opTheme.message.error("Could not load the form to edit this photo.")},"json","get");return!1},searchByTags:function(b){b.preventDefault();var a=$(b.target).parent(),b=$(a.find("input[name=tags]")[0]).val(),
a=$(a).attr("action");location.href=0<b.length?a.replace("/list","")+"/tags-"+b+"/list":a;return!1},settings:function(){$("ul#settingsbar").slideToggle("medium");$("li#nav-signin").toggleClass("active");return!1},keyBrowseNext:function(){var b;if(b=$(".image-pagination .next a").attr("href"))location.href=b},keyBrowsePrevious:function(){var b;if(b=$(".image-pagination .previous a").attr("href"))location.href=b},webhookDelete:function(b){b.preventDefault();var a=$(b.target),b=a.attr("href")+".json";
OP.Util.makeRequest(b,{},function(b){200===b.code?(a.parent().remove(),opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});return!1}},formHandlers:{hasErrors:function(b,a){var d=[];b.children("input, textarea").each(function(){var c=$(this);c.prev().removeClass("error");var e=c.attr(a);if(void 0!=e)for(var e=e.split(" "),f=0;f<e.length;f++){if("date"==e[f]&&!opTheme.formHandlers.passesDate(c)){var g=c.prev().html()+" is not a valid date";
d.push([c,g])}"email"==e[f]&&!opTheme.formHandlers.passesEmail(c)&&(g=c.prev().html()+" is not a valid email address",d.push([c,g]));"ifexists"==e[f]&&""!=c.val()&&void 0!=c.val()&&$.merge(d,opTheme.formHandlers.hasErrors(b,"data-ifexists"));"integer"==e[f]&&!opTheme.formHandlers.passesInteger(c)&&(g=c.prev().html()+" is not a number",d.push([c,g]));"match"==e[f]&&(g=c.attr("data-match"),opTheme.formHandlers.passesMatch(c,g)||(g=c.prev().html()+" does not match "+$("#"+g).prev().html(),d.push([c,
g])));"required"==e[f]&&!opTheme.formHandlers.passesRequired(c)&&(g=c.prev().html()+" is required",d.push([c,g]));"alphanumeric"==e[f]&&!opTheme.formHandlers.passesAlphaNumeric(c)&&(g=c.prev().html()+" can only contain alpha-numeric characters",d.push([c,g]))}});return d},init:function(){$(this).submit(opTheme.submitHandlers.siteForm);opTheme.formHandlers.showPlaceholders();$("input[data-placeholder]").live("focus",opTheme.formHandlers.placeholderFocus);$("input[data-placeholder]").live("blur",opTheme.formHandlers.placeholderBlur)},
passesAlphaNumeric:function(b){return/^[a-zA-Z0-9]+$/.test(b.val())},passesDate:function(b){return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b.val())},passesEmail:function(b){return/^([\w-\.+]+@([\w-]+\.)+[\w-]{2,4})?$/.test(b.val())},passesInteger:function(b){return/^\d+$/.test(b.val())},passesMatch:function(b,a){return b.val()==$("#"+a).val()},passesRequired:function(b){return b.is("textarea")||b.is("input")&&("text"==b.attr("type")||"password"==b.attr("type"))?""!=b.val()&&void 0!=b.val():b.is("checkbox")?
b.is(":checked"):!0},placeholderBlur:function(){var b=$(this);""==b.val()&&(b.val(b.attr("data-placeholder")),b.addClass("placeholder"))},placeholderFocus:function(){var b=$(this);b.val()==b.attr("data-placeholder")&&(b.val(""),b.removeClass("placeholder"))},removePlaceholders:function(){$("input[data-placeholder]").each(function(){var b=$(this);b.val()==b.attr("data-placeholder")&&(b.val(""),b.removeClass("placeholder"))})},showPlaceholders:function(){$("input[data-placeholder]").each(function(){var b=
$(this);""==b.val()&&(b.val(b.attr("data-placeholder")),b.addClass("placeholder"))})}},front:{init:function(b){0<b.length&&b.cycle({fx:"fade"}).find("img").click(function(a){location.href=$(a.target).attr("data-origin")})}},init:{load:function(){sessionStorage.device?window.device=JSON.parse(sessionStorage.device):(window.device={},window.device.agent=navigator.userAgent.toLowerCase(),window.device.scrWidth=screen.width,window.device.scrHeight=screen.height,window.device.otherBrowser=-1!=window.device.agent.indexOf("series60")||
-1!=window.device.agent.indexOf("symbian")||-1!=window.device.agent.indexOf("windows ce")||-1!=window.device.agent.indexOf("blackberry"),window.device.mobileOS="undefined"!=typeof orientation?!0:!1,window.device.touchOS="ontouchstart"in document.documentElement?!0:!1,window.device.iOS=-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPad")||-1!=navigator.platform.indexOf("iPod")?!0:!1,window.device.android=-1!=window.device.agent.indexOf("android")||!window.device.iOS&&!window.device.otherBrowser&&
window.device.touchOS&&window.device.mobileOS?!0:!1,sessionStorage.device=JSON.stringify(window.device));var b=!0===window.device.mobileOS?"mobile":"desktop";$("body").addClass(b);0<$("#slideshow").length&&!0===window.device.mobileOS&&!0===window.device.touchOS?$(document).ready(function(){new Swipe(document.getElementById("swipe"),{callback:function(){}})}):0<$("#slideshow").length&&$(document).ready(function(){$("#slider").anythingSlider()})},attach:function(){OP.Util.on("click:action-delete",opTheme.callback.actionDelete);
OP.Util.on("click:action-jump",opTheme.callback.commentJump);OP.Util.on("click:credential-delete",opTheme.callback.credentailDelete);OP.Util.on("click:group-checkbox",opTheme.callback.groupCheckbox);OP.Util.on("click:group-update",opTheme.callback.groupPost);OP.Util.on("click:login",opTheme.callback.login);OP.Util.on("click:photo-delete",opTheme.callback.photoDelete);OP.Util.on("click:photo-edit",opTheme.callback.photoEdit);OP.Util.on("click:nav-item",opTheme.callback.searchBarToggle);OP.Util.on("click:search",
opTheme.callback.searchByTags);OP.Util.on("click:settings",opTheme.callback.settings);OP.Util.on("click:webhook-delete",opTheme.callback.webhookDelete);OP.Util.on("keydown:browse-next",opTheme.callback.keyBrowseNext);OP.Util.on("keydown:browse-previous",opTheme.callback.keyBrowsePrevious);opTheme.front.init($("div.front-slideshow"));"object"===typeof OPU&&OPU.init();$("form.validate").each(opTheme.formHandlers.init)}},message:{close:function(){void 0!=f&&(clearTimeout(f),f=void 0,$("#message-box").animate({height:"toggle"},
500,function(){$("#message-box").remove()}))},confirm:function(b){opTheme.message.show(b,"confirm")},error:function(b){opTheme.message.show(b,"error")},show:function(b,a){var d="error"==a?"confirm":"error";void 0!=f?(clearTimeout(f),f=void 0,$("#message-box").removeClass(d).addClass(a).html('<div><a class="message-close">close</a>'+b+"</div>"),f=setTimeout(function(){$("#message-box").animate({height:"toggle"},500,function(){$("#message-box").remove();f=void 0})},7E3)):($("html").append('<section id="message-box" style="display:none;"><div><a class="message-close">close</a>'+
b+"</div></section>"),$("#message-box").removeClass(d).addClass(a).animate({height:"toggle"},500,function(){f=setTimeout(function(){$("#message-box").animate({height:"toggle"},500,function(){$("#message-box").remove();f=void 0})},7E3)}));$("a.message-close").click(opTheme.message.close)}},submitHandlers:{siteForm:function(b){var a=$(this);b.preventDefault();opTheme.formHandlers.removePlaceholders();b=opTheme.formHandlers.hasErrors(a,"data-validation");opTheme.formHandlers.showPlaceholders();if(0==
b.length)this.submit();else{for(var a="<ul>",d=0;d<b.length;d++)b[d][0].prev().addClass("error"),a+="<li>"+b[d][1]+"</li>";a+="</ul>";$("html").animate({scrollTop:b[0][0].offset().top-30},500);b[0][0].focus();opTheme.message.error(a)}}},user:{base:{loginProcessed:function(b){200!=b.code?e("processing of login failed"):(e("login processing succeeded"),window.location.reload())}},browserid:{loginFailure:function(){e("login failed")},loginSuccess:function(b){OP.Util.makeRequest("/user/browserid/login.json",
{assertion:b},opTheme.user.base.loginProcessed)}}}}}();